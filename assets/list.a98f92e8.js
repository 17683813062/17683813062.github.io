var V=Object.defineProperty,A=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var I=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&I(e,n,t[n]);if(D)for(var n of D(t))z.call(t,n)&&I(e,n,t[n]);return e},b=(e,t)=>A(e,F(t));import{_ as J,d as O,U as y,r as Y,o as E,t as j,a as w,c as C,f as u,w as v,g as i,n as r,C as N,F as q,z as G,B as P,ab as H,M as K,v as Q,x as X,j as p}from"./index.7ae61b15.js";import{b as R}from"./utils.5cf54832.js";const Z={setup(){const e=O(),t=y([]),n=y(!1),a=y(!1),m=y(!1);let l=Y({user:JSON.parse(localStorage.getItem("user")),page:0,limit:10,totle:"",getToday1:R(),myList:[]}),c=(o,g)=>{o=new Date(o.replace(/-/g,"/")),g=new Date(g.replace(/-/g,"/"));var h=Math.abs(o.getTime()-g.getTime())/1e3/24/60/60,k=Math.floor(h/365);return k},f=o=>{e.push({path:"/nearDetail",query:{username:o}})};const L=()=>{console.log("\u52A0\u8F7D+1"),l.page+=1,s()},_=()=>{a.value=!1,n.value=!0,s()};let s=async()=>{let{page:o,limit:g}=l;m.value&&(m.value=!1);let h=await H({page:o,limit:g});t.value=[];let k=t.value,T=h.reult.filter(d=>d.username!==l.user.username);if(l.myList=h.reult.filter(d=>d.username==l.user.username),l.myList.length==0){K.error("\u8BF7\u5148\u66F4\u65B0\u4F4D\u7F6E\u4FE1\u606F");return}let S=k.concat(T);S.forEach((d,re)=>{var U=AMap.GeometryUtil.distance([l.myList[0].lng,l.myList[0].lat],[d.lng,d.lat]);let B=Number(U)/1e3;d.distance=B.toFixed(2)}),t.value=S,n.value=!1,(h.reult.length==0||h.reult.length<l.limit)&&(a.value=!0),console.log(t,"\u6240\u6709\u4EBA\u5458")};return E(()=>{}),b(M({list:t,onLoad:L,loading:n,finished:a,onRefresh:_,refreshing:m},j(l)),{goDetail:f,getYear:c,getToday1:R})}},$=e=>(Q("data-v-ae73595a"),e=e(),X(),e),x={class:"near"},ee={class:"right"},te={style:{"font-weight":"200","font-size":"0.3rem"}},se=$(()=>i("span",null,"0.00km",-1)),ae=["onClick"],ne={class:"right"},ie={style:{"font-weight":"200","font-size":"0.3rem"}};function le(e,t,n,a,m,l){const c=p("van-image"),f=p("van-cell"),L=p("van-list"),_=p("van-pull-refresh");return w(),C("div",x,[u(_,{modelValue:a.refreshing,"onUpdate:modelValue":t[2]||(t[2]=s=>a.refreshing=s),onRefresh:a.onRefresh},{default:v(()=>[u(L,{loading:a.loading,"onUpdate:loading":t[1]||(t[1]=s=>a.loading=s),finished:a.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:a.onLoad},{default:v(()=>[u(f,{center:""},{title:v(()=>[i("div",{onClick:t[0]||(t[0]=N(s=>a.goDetail(e.myList[0]?e.myList[0].username:""),["stop"])),class:"main"},[u(c,{width:"100",height:"100",src:e.myList[0]?JSON.parse(e.myList[0].user).headImg:""},null,8,["src"]),i("div",ee,[i("h6",null,r(e.myList[0]?e.myList[0].nickname?e.myList[0].nickname:e.myList[0].username:""),1),i("h6",te,r(e.myList[0]?e.myList[0].birthday?a.getYear(e.myList[0].birthday,a.getToday1()):"\u6682\u65E0":"")+" \xA0"+r(e.myList[0]?e.myList[0].heightWeight?e.myList[0].heightWeight:"\u6682\u65E0":"")+"\xA0 "+r(e.myList[0]?e.myList[0].attr?e.myList[0].attr:"\u6682\u65E0":""),1),i("p",null,r(e.myList[0]?e.myList[0].sign?e.myList[0].sign:"\u6682\u65E0\u7B7E\u540D":""),1),se])])]),_:1}),(w(!0),C(q,null,G(a.list,(s,o)=>(w(),P(f,{center:"",key:o},{title:v(()=>[i("div",{onClick:N(g=>a.goDetail(s.username),["stop"]),class:"main"},[u(c,{width:"100",height:"100",src:JSON.parse(s.user).headImg},null,8,["src"]),i("div",ne,[i("h6",null,r(s.nickname?s.nickname:s.username),1),i("h6",ie,r(s.birthday?a.getYear(s.birthday,a.getToday1()):"\u6682\u65E0")+" \xA0"+r(s.heightWeight?s.heightWeight:"\u6682\u65E0")+"\xA0 "+r(s.attr?s.attr:"\u6682\u65E0"),1),i("p",null,r(s.sign?s.sign:"\u6682\u65E0\u7B7E\u540D"),1),i("span",null,r(s.distance)+"km",1)])],8,ae)]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])}var he=J(Z,[["render",le],["__scopeId","data-v-ae73595a"]]);export{he as default};
