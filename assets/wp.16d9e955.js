var R=Object.defineProperty,F=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var L=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var U=(a,e,s)=>e in a?R(a,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[e]=s,B=(a,e)=>{for(var s in e||(e={}))P.call(e,s)&&U(a,s,e[s]);if(L)for(var s of L(e))j.call(e,s)&&U(a,s,e[s]);return a},M=(a,e)=>F(a,J(e));import{_ as q,D as O,r as T,o as W,s as z,t as A,a as r,c as d,d as l,w as u,e as n,F as y,m as b,h as v,l as _,n as I,p as E,q as G,g as H,I as K,M as Q,i as m}from"./index.72e77469.js";import{d as X,a as Y,n as Z,r as $,b as x,i as ee}from"./dot.fa010aac.js";import{u as te,a as ae}from"./index.b343909a.js";const oe={components:{[O.Component.name]:O.Component},setup(){let a=H(),e=T({show:!1,show1:!1,moreShow:!1,user:JSON.parse(localStorage.getItem("user")),list:[{title:"\u65B0\u5EFA\u6587\u4EF6\u5939",head:"\u65B0\u5EFA"},{title:"\u4E0A\u4F20\u56FE\u7247",head:"\u4E0A\u4F20"}],list1:[{title:"\u5220\u9664",head:"\u5220\u9664"}],dirName:"",image:X,dotImg:Y,dirList:[],fileList1:[],server:"",showViewer:!1,images:[],removeDir:"",flag:!localStorage.getItem("user")}),s=()=>{a.push({path:"/mine"})},i=o=>{e.moreShow=!0,e.removeDir=o},S=o=>{o.length||(o=[o]);var p=new FormData;p.enctype="multipart/form-data",p.append("mypath","public/wp/"+e.user.username+"_code"),o.forEach(function(c){p.append("myfile",c.file)}),te(p).then(c=>{let t=e.fileList1;c.fileList.forEach(f=>{t.push({url:e.serverUrl+f.filename})}),e.fileList1=t,e.show=!1,g()})},N=o=>{o.split(".")[1]?K([e.server+o]):a.push({name:"wpdir",params:{dir:o,fullDir:""}})},C=()=>{e.show1=!1,e.dirName=""},h=async()=>{let o=await Z({dir:e.dirName,username:e.user.username});o.code==1&&(Q.success(o.msg),e.show=!1,e.show1=!1,e.dirName="",g())},g=async(o="public/wp/"+e.user.username+"_code")=>{let c=await $({dir:o});e.dirList=c.result},w=async o=>{o=="\u65B0\u5EFA\u6587\u4EF6\u5939"&&(e.show1=!0),o=="\u5220\u9664"&&(await x({dirpath:"public/wp/"+e.user.username+"_code/"+e.removeDir}),e.moreShow=!1,g())},V=()=>{e.show=!0},k=async()=>{let o=await ae({username:e.user.username});localStorage.setItem("user",JSON.stringify(o.result[0])),o.result[0].wp||await ee({username:e.user.username})};return W(()=>{localStorage.getItem("user")&&(e.server=z+"/wp/"+JSON.parse(localStorage.getItem("user")).username+"_code/",k(),g())}),M(B({},A(e)),{pickEdit:V,pickOprate:w,cancleCreateDir:C,enterCreateDir:h,goDirIn:N,afterRead:S,goMore:i,goLogin:s})}},se={class:"popBox"},le=["onClick"],re={key:0},ie={key:1},ne={style:{width:"200px",height:"200px",background:"#fff",position:"relative",overflow:"hidden"}},de={style:{width:"100%",display:"flex","justify-content":"space-around",position:"absolute",bottom:"0.4rem"}},ue=v("\u53D6\u6D88"),me=v("\u786E\u8BA4"),pe={class:"popBox"},ce=["onClick"],fe={key:0},_e={class:"dirBox"},ge=["onClick"],he=["onClick"],we=["src"];function ve(a,e,s,i,S,N){const C=m("t-fab"),h=m("t-avatar"),g=m("van-uploader"),w=m("t-popup"),V=m("t-input"),k=m("t-button"),o=m("t-image"),p=m("t-image-viewer"),c=m("van-dialog");return r(),d(y,null,[l(C,{onClick:i.pickEdit,class:"demo-fab-button editBtn"},null,8,["onClick"]),l(w,{modelValue:a.show,"onUpdate:modelValue":e[0]||(e[0]=t=>a.show=t),placement:"bottom"},{default:u(()=>[n("div",se,[(r(!0),d(y,null,b(a.list,(t,f)=>(r(),d("div",{onClick:D=>i.pickOprate(t.title),key:f,class:"item"},[t.title=="\u4E0A\u4F20\u56FE\u7247"?(r(),d("div",re,[l(g,{multiple:"","after-read":i.afterRead},{default:u(()=>[l(h,{shape:"circle"},{default:u(()=>[v(_(t.head),1)]),_:2},1024),n("p",null,_(t.title),1)]),_:2},1032,["after-read"])])):I("",!0),t.title!="\u4E0A\u4F20\u56FE\u7247"?(r(),d("div",ie,[l(h,{shape:"circle"},{default:u(()=>[v(_(t.head),1)]),_:2},1024),n("p",null,_(t.title),1)])):I("",!0)],8,le))),128))])]),_:1},8,["modelValue"]),l(w,{modelValue:a.show1,"onUpdate:modelValue":e[2]||(e[2]=t=>a.show1=t),placement:"center"},{default:u(()=>[n("div",ne,[l(V,{modelValue:a.dirName,"onUpdate:modelValue":e[1]||(e[1]=t=>a.dirName=t),style:{"margin-top":"0.4rem"},placeholder:"\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"]),n("div",de,[l(k,{onClick:i.cancleCreateDir},{default:u(()=>[ue]),_:1},8,["onClick"]),l(k,{onClick:i.enterCreateDir,theme:"primary"},{default:u(()=>[me]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),l(w,{modelValue:a.moreShow,"onUpdate:modelValue":e[3]||(e[3]=t=>a.moreShow=t),placement:"bottom"},{default:u(()=>[n("div",pe,[(r(!0),d(y,null,b(a.list1,(t,f)=>(r(),d("div",{onClick:D=>i.pickOprate(t.title),key:f,class:"item"},[t.title!="\u4E0A\u4F20\u56FE\u7247"?(r(),d("div",fe,[l(h,{shape:"circle"},{default:u(()=>[v(_(t.head),1)]),_:2},1024),n("p",null,_(t.title),1)])):I("",!0)],8,ce))),128))])]),_:1},8,["modelValue"]),n("ul",_e,[(r(!0),d(y,null,b(a.dirList,(t,f)=>(r(),d("li",{onClick:D=>i.goDirIn(t),key:f+"_dir"},[t.split(".")[1]?(r(),E(o,{key:0,class:"image-container",src:a.server+t,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])):(r(),E(o,{key:1,class:"image-container",src:a.image,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])),n("p",null,_(t),1),n("div",{onClick:G(D=>i.goMore(t),["stop"]),class:"more"},[n("img",{src:a.dotImg,alt:""},null,8,we)],8,he)],8,ge))),128))]),l(p,{modelValue:a.showViewer,"onUpdate:modelValue":e[4]||(e[4]=t=>a.showViewer=t),images:a.images,"onUpdate:images":e[5]||(e[5]=t=>a.images=t),"initial-index":0},null,8,["modelValue","images"]),l(c,{onConfirm:i.goLogin,title:"\u8BF7\u767B\u5F55\uFF01\uFF01\uFF01",show:a.flag,"onUpdate:show":e[6]||(e[6]=t=>a.flag=t)},null,8,["onConfirm","show"])],64)}var De=q(oe,[["render",ve],["__scopeId","data-v-26f140dc"]]);export{De as default};
