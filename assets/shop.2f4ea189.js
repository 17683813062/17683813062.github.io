var x=Object.defineProperty,M=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var b=(e,s,o)=>s in e?x(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,$=(e,s)=>{for(var o in s||(s={}))V.call(s,o)&&b(e,o,s[o]);if(I)for(var o of I(s))E.call(s,o)&&b(e,o,s[o]);return e},N=(e,s)=>M(e,U(s));import{_ as J,k as O,y as j,r as q,z as A,b as P,o as H,t as K,a as _,c as g,d as a,w as p,F as v,m as T,p as Q,e as c,h as w,l as d,f as W,g as X,M as Y,A as Z,B as ee,i as n}from"./index.12c3182a.js";import{h as te,i as z,j as se}from"./index.4246fdf3.js";const oe=O({beforeRouteEnter(e,s,o){o(t=>{s.path=="/shopdetail"?(t.scroll=localStorage.getItem("scrollTop"),t.isType=localStorage.getItem("isType")):(t.scroll=0,t.isType="all",localStorage.removeItem("scrollTop"),localStorage.removeItem("isType")),console.log(s,"from"),t.store.commit("changeFooter",!1)})},setup(){const e=W(),s=X();let o=j(null),t=q({listDom:o,store:e,imgUrl:A,goodsList:[],typeList:[],flutureList:[],scroll:null,isType:"all",timer:""}),L=()=>{t.timer=setTimeout(()=>{o._value.scrollTop=0,clearTimeout(t.timer)},100)},D=async()=>{let l=await te();t.typeList=l.result.filter(r=>r.name!="\u5373\u5C06\u4E0A\u65B0")},f=l=>{s.push({path:"/shopdetail",query:{_id:l}}),localStorage.setItem("scrollTop",o.value.scrollTop)},h=async()=>{if(t.isType=="all"){let l=await z();t.goodsList=l.result}else u(t.isType)},u=async l=>{if(l=="all"){let r=await z();t.goodsList=r.result}else{let r=await se({type:l});r.code==1&&Y.success("\u7B5B\u9009\u6210\u529F"),console.log(l,r.result),l=="\u5373\u5C06\u4E0A\u65B0"?t.flutureList=r.result:(t.goodsList=r.result,console.log(t.goodsList,"\u7B5B\u9009"))}},y=l=>{t.isType=l,u(l)};return P((l,r)=>{l.path=="/shopdetail"&&localStorage.setItem("isType",t.isType),e.commit("changeFooter",!0)}),H(()=>{h(),D(),u("\u5373\u5C06\u4E0A\u65B0"),t.timer=setTimeout(()=>{o._value.scrollTop=t.scroll,clearTimeout(t.timer)},100)}),N($({},K(t)),{listDom:o,goDetail:f,filterData:y,returnTop:L})}}),k=e=>(Z("data-v-37e9d7e2"),e=e(),ee(),e),le={ref:"listDom",id:"shoplist1",class:"shopList"},ie=w(" \u5546\u57CE "),ae=k(()=>c("img",{src:"https://tdesign.gtimg.com/site/swiper/02.png",alt:""},null,-1)),re=k(()=>c("p",{style:{"font-size":"0.3rem","font-weight":"bold","text-indent":"0.2rem","line-height":"1rem"}},"\u5373\u5C06\u4E0A\u65B0",-1)),ne={class:"list"},ce=["onClick"],pe={class:"price"},de=k(()=>c("p",{style:{"font-size":"0.3rem","font-weight":"bold","text-indent":"0.2rem","line-height":"1rem"}},"\u5168\u90E8\u5546\u54C1",-1)),_e={class:"list list1"},ue=["onClick"],ge={class:"price"};function me(e,s,o,t,L,D){const f=n("t-navbar"),h=n("van-sticky"),u=n("t-swiper-item"),y=n("t-image"),l=n("t-swiper"),r=n("t-grid-item"),B=n("t-grid"),F=n("t-tag"),S=n("van-image"),G=n("t-divider"),R=n("van-tag");return _(),g("div",le,[a(h,{"offset-top":0},{default:p(()=>[a(f,{onClickText:e.returnTop},{default:p(()=>[ie]),_:1},8,["onClickText"])]),_:1}),a(l,{class:"my-swiper",autoplay:!1,height:180,direction:"horizontal",navigation:{type:"fraction"}},{default:p(()=>[a(u,{class:"swiper-item--demo"},{default:p(()=>[ae]),_:1}),a(u,{class:"swiper-item--demo"},{default:p(()=>[a(y,{fit:"contain",lazy:"",class:"image-container",src:"https://tdesign.gtimg.com/site/swiper/02.png",alt:"\u4E00\u5F20\u56FE\u7247"})]),_:1})]),_:1}),a(B,null,{default:p(()=>[a(r,{onClick:s[0]||(s[0]=i=>e.filterData("all")),text:"\u5168\u90E8",image:e.imgUrl},null,8,["image"]),(_(!0),g(v,null,T(e.typeList,(i,m)=>(_(),Q(r,{onClick:C=>e.filterData(i.name),key:m,text:i.name,image:e.imgUrl},null,8,["onClick","text","image"]))),128))]),_:1}),re,c("ul",ne,[(_(!0),g(v,null,T(e.flutureList,(i,m)=>(_(),g("li",{onClick:C=>e.goDetail(i._id),key:m},[a(F,{size:"small",class:"tag",theme:"primary",variant:"light-outline"},{default:p(()=>[w(d(i.typeName),1)]),_:2},1024),a(S,{width:"86%",height:"3rem",fit:"cover",src:JSON.parse(i.bannerList)[0].url},null,8,["src"]),c("p",pe,"\uFFE5"+d(i.price),1),c("p",null,d(i.title),1),c("p",null,d(i.desc),1)],8,ce))),128))]),a(G),de,c("ul",_e,[(_(!0),g(v,null,T(e.goodsList,(i,m)=>(_(),g("li",{onClick:C=>e.goDetail(i._id),key:m},[a(R,{class:"tag",plain:"",type:"primary"},{default:p(()=>[w(d(i.typeName),1)]),_:2},1024),a(S,{width:"86%",height:"3rem",fit:"cover",src:JSON.parse(i.bannerList)[0].url},null,8,["src"]),c("p",ge,"\uFFE5"+d(i.price),1),c("p",null,d(i.title),1),c("p",null,d(i.desc),1)],8,ue))),128))])],512)}var ve=J(oe,[["render",me],["__scopeId","data-v-37e9d7e2"]]);export{ve as default};
