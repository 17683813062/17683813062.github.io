var L=Object.defineProperty,F=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var g=(t,e,o)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,h=(t,e)=>{for(var o in e||(e={}))B.call(e,o)&&g(t,o,e[o]);if(y)for(var o of y(e))E.call(e,o)&&g(t,o,e[o]);return t},b=(t,e)=>F(t,x(e));import{_ as R,r as U,o as $,t as w,c,a as u,w as k,b as d,F as z,k as A,i as D,u as N,A as P,M as m,e as f,f as p,y as S,g as C}from"./index.7e280280.js";import{m as V}from"./index.1c12ac1b.js";const M={beforeRouteEnter(t,e,o){o(a=>{a.store.commit("changeFooter",!1)})},setup(){const t=N();let e=U({store:t,fileList1:[],serverUrl:P}),o=()=>{if(!e.fileList1.length){m.error("\u6682\u65E0\u53EF\u590D\u5236\u5185\u5BB9");return}const r=document.createElement("input");document.body.appendChild(r),r.setAttribute("readonly","readonly"),r.setAttribute("value",e.fileList1[0].url),r.select(),document.execCommand("copy")&&(document.execCommand("copy"),m.success("\u590D\u5236\u6210\u529F")),document.body.removeChild(r)},a=r=>{console.log(r),r.length||(r=[r]);var n=new FormData;n.enctype="multipart/form-data",r.forEach(function(s){n.append("myfile",s.file)}),V(n).then(s=>{let l=e.fileList1;s.fileList.forEach(i=>{l.push({url:e.serverUrl+i.filename})}),e.fileList1=l,m.success("\u4E0A\u4F20\u56FE\u7247\u6210\u529F")})};return $((r,n)=>{t.commit("changeFooter",!0)}),b(h({},w(e)),{afterRead:a,copyUrl:o})}},O=C(" \u83B7\u53D6\u5728\u7EBF\u94FE\u63A5 "),I={class:"fileList"},T=["onClick"],j={style:{"text-align":"center"}},q=C("\u70B9\u51FB\u590D\u5236");function G(t,e,o,a,r,n){const s=f("t-navbar"),l=f("van-uploader"),i=f("t-button");return p(),c("div",null,[u(s,null,{default:k(()=>[O]),_:1}),d("ul",I,[(p(!0),c(z,null,A(t.fileList1,(_,v)=>(p(),c("li",{onClick:H=>t.removeFileList(v),key:v},[d("div",{style:S("background: url("+_.url+") top center no-repeat;background-size: cover;"),class:"imgBox"},null,4)],8,T))),128))]),u(l,{"after-read":a.afterRead},null,8,["after-read"]),d("p",j,D(t.fileList1.length?t.fileList1[0].url:""),1),u(i,{onClick:e[0]||(e[0]=_=>a.copyUrl()),theme:"primary",size:"large"},{default:k(()=>[q]),_:1})])}var W=R(M,[["render",G],["__scopeId","data-v-664bbcdb"]]);export{W as default};
