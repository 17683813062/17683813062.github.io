var O=Object.defineProperty,I=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var v=(e,t,o)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,C=(e,t)=>{for(var o in t||(t={}))P.call(t,o)&&v(e,o,t[o]);if(S)for(var o of S(t))b.call(t,o)&&v(e,o,t[o]);return e},k=(e,t)=>I(e,J(t));import{_ as w,m as L,r as $,o as B,t as F,a as R,c as V,d as i,w as g,e as r,n as y,F as z,g as E,p as M,s as N,i as G,j as m}from"./index.4c13ffa5.js";const T=L({setup(){const e=E();let t=$({user:JSON.parse(localStorage.getItem("user")),address:""}),o=()=>{if(localStorage.getItem("lng")){let n=localStorage.getItem("lng"),s=localStorage.getItem("lat");M({lng:n,lat:s}).then(l=>{alert(JSON.stringify(l)),t.address=l.address,console.log(l,"\u5B9A\u4F4D\u4FE1\u606F"),N({user:t.user,address:l.address,lng:n,lat:s}).then(a=>{console.log(a)})}),console.log(JSON.stringify(data))}else AMap.plugin("AMap.Geolocation",function(){var n=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});n.getCurrentPosition(),AMap.event.addListener(n,"complete",s),AMap.event.addListener(n,"error",l);function s(a){let p=a.position.lng,d=a.position.lat;localStorage.setItem("lng",p),localStorage.setItem("lat",d),M({lng:p,lat:d}).then(u=>{alert(JSON.stringify(u)),t.address=u.address,console.log(u,"\u5B9A\u4F4D\u4FE1\u606F"),N({user:t.user,address:u.address,lng:p,lat:d}).then(A=>{console.log(A)})}),console.log(JSON.stringify(a))}function l(a){alert(JSON.stringify(a,"error")),console.log(JSON.stringify(a,"error"))}})};B(()=>{o()});let h=()=>{!t.user||!t.user.username||e.push({path:"/nearMan"})},f=()=>{e.push({path:"/leaveword"})},_=()=>{e.push({path:"/login"})},c=()=>{e.push({path:"/share"})};return k(C({},F(t)),{onLogin:_,goSpeakPage:f,goMapPage:h,goshare:c})}}),j=G("\u767B\u5F55"),D=r("br",null,null,-1),H=r("span",null,"\u9644\u8FD1\u7684\u4EBA",-1),q=r("span",null,"\u7559\u8A00",-1),K=r("span",null,"\u63A8\u5E7F",-1);function Q(e,t,o,h,f,_){const c=m("t-button"),n=m("van-image"),s=m("t-cell");return R(),V(z,null,[i(c,{style:{float:"right"},onClick:t[0]||(t[0]=l=>e.onLogin()),theme:"primary",size:"small"},{default:g(()=>[j]),_:1}),D,i(n,{round:"",width:"2rem",height:"2rem",src:e.user?e.user.headImg:""},null,8,["src"]),r("p",null,"\xA0\xA0\xA0\xA0"+y(e.user?e.user.username?"\u767B\u5F55\u6210\u529F\uFF01\uFF01\uFF01 \u6B22\u8FCE\u767B\u5F55\uFF1A "+e.user.username:"\u7528\u6237\u540D\u4E0D\u5B58\u5728":" \u672A\u767B\u5F55"),1),r("p",null,"\xA0\xA0\xA0\xA0"+y(e.address),1),r("div",null,[i(s,{onClick:e.goMapPage,note:"\u4EC5\u53EF\u767B\u5F55\u7528\u6237\u67E5\u770B"},{title:g(()=>[H]),_:1},8,["onClick"]),i(s,{onClick:e.goSpeakPage,note:"\u6709\u95EE\u9898\u53EF\u4EE5\u5728\u8FD9\u7559\u8A00"},{title:g(()=>[q]),_:1},8,["onClick"]),i(s,{onClick:e.goshare},{title:g(()=>[K]),_:1},8,["onClick"])])],64)}var X=w(T,[["render",Q]]);export{X as default};
