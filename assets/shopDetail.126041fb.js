var M=Object.defineProperty,$=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var O=(e,t,o)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))D.call(t,o)&&O(e,o,t[o]);if(I)for(var o of I(t))R.call(t,o)&&O(e,o,t[o]);return e},C=(e,t)=>$(e,B(t));import{_ as q,m as F,u as V,d as z,b as H,r as T,o as E,M as m,e as J,t as P,a as d,c as k,f as l,w as u,F as A,C as K,p as f,g as i,q as w,n as g,a6 as Q,a7 as U,a4 as W,i as h,j as s}from"./index.99279141.js";const X=F({beforeRouteEnter(e,t,o){o(a=>{a.store.commit("changeFooter",!1)})},setup(){const e=V(),t=z(),o=H();let a=T({store:o,user:JSON.parse(localStorage.getItem("user")),timer:null,goodObj:{_id:"",bannerList:[],title:"",desc:"",price:null,html:"",typeName:"",typeId:"",timestamp:"",time:""}}),v=async()=>{if(localStorage.getItem("user")=="undefined"||localStorage.getItem("user")=="null"||localStorage.getItem("user")==""||localStorage.getItem("user")=="{}"||!localStorage.getItem("user")){localStorage.setItem("user","{}"),m.error("\u8BF7\u767B\u5F55!!!");return}let n=a.goodObj._id;await Q({_id:n,username:a.user.username}),m.success("\u52A0\u5165\u8D2D\u7269\u8F66\u6210\u529F")},S=()=>{if(localStorage.getItem("user")=="undefined"||localStorage.getItem("user")=="null"||localStorage.getItem("user")==""||localStorage.getItem("user")=="{}"||!localStorage.getItem("user")){localStorage.setItem("user","{}"),m.error("\u8BF7\u767B\u5F55!!!");return}t.push({path:"/shopcar"})},p=async()=>{let n=await U({_id:a.goodObj._id});console.log(n,"\u5220\u9664\u5546\u54C1"),t.push({path:"/shop"})},_=()=>{t.push({path:"/editgood",query:{_id:a.goodObj._id}})},b=async n=>{let r=await W({_id:n});a.goodObj.bannerList=JSON.parse(r.result[0].bannerList),a.goodObj.title=r.result[0].title,a.goodObj.desc=r.result[0].desc,a.goodObj.price=r.result[0].price,a.goodObj.html=r.result[0].html,a.goodObj.typeName=r.result[0].typeName,a.goodObj.typeId=r.result[0].typeId};return E(()=>{if(a.goodObj._id=e.query._id,b(e.query._id),localStorage.getItem("user")=="undefined"||localStorage.getItem("user")=="null"||localStorage.getItem("user")==""||localStorage.getItem("user")=="{}"||!localStorage.getItem("user")){localStorage.setItem("user","{}"),m.error("\u8BF7\u767B\u5F55!!!");return}}),J((n,r)=>{o.commit("changeFooter",!0)}),C(j({},P(a)),{editGoods:_,removeGoods:p,goShopCar:S,addShopCar:v})}}),Y=h(" \u8BE6\u60C5 "),Z={class:"goodsMsg"},x=h("\u7F16\u8F91\u5546\u54C1 "),ee=h("\u5220\u9664\u5546\u54C1"),te=["innerHTML"];function oe(e,t,o,a,v,S){const p=s("sound-icon"),_=s("t-navbar"),b=s("van-image"),n=s("van-swipe-item"),r=s("van-swipe"),y=s("t-button"),N=s("van-action-bar-icon"),L=s("van-action-bar-button"),G=s("van-action-bar");return d(),k("div",null,[l(_,null,{right:u(()=>[l(p)]),default:u(()=>[Y]),_:1}),l(r,{autoplay:3e3,"lazy-render":""},{default:u(()=>[(d(!0),k(A,null,K(e.goodObj.bannerList,c=>(d(),f(n,{key:c},{default:u(()=>[l(b,{width:"100%",height:"7rem",fit:"cover",src:c.url},null,8,["src"])]),_:2},1024))),128))]),_:1}),i("div",Z,[e.user&&e.user.username=="admin"?(d(),f(y,{key:0,onClick:t[0]||(t[0]=c=>e.editGoods()),theme:"primary",size:"small"},{default:u(()=>[x]),_:1})):w("",!0),e.user&&e.user.username=="admin"?(d(),f(y,{key:1,style:{"margin-left":"0.2rem"},onClick:t[1]||(t[1]=c=>e.removeGoods()),theme:"primary",size:"small"},{default:u(()=>[ee]),_:1})):w("",!0),i("h6",null,"\uFFE5"+g(e.goodObj.price),1),i("p",null,g(e.goodObj.title),1),i("p",null,"\u7C7B\u578B\uFF1A"+g(e.goodObj.typeName),1),i("p",null,g(e.goodObj.desc),1),i("div",{class:"goodHtml",innerHTML:e.goodObj.html},null,8,te)]),l(G,null,{default:u(()=>[l(N,{onClick:e.goShopCar,icon:"shop-o",text:"\u8D2D\u7269\u8F66"},null,8,["onClick"]),l(L,{onClick:e.addShopCar,color:"#be99ff",type:"warning",text:"\u52A0\u5165\u8D2D\u7269\u8F66"},null,8,["onClick"])]),_:1})])}var se=q(X,[["render",oe],["__scopeId","data-v-66ea0dc0"]]);export{se as default};
