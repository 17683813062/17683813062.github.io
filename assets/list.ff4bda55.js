var V=Object.defineProperty,A=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var I=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))W.call(t,n)&&I(e,n,t[n]);if(D)for(var n of D(t))z.call(t,n)&&I(e,n,t[n]);return e},N=(e,t)=>A(e,F(t));import{_ as J,U as y,r as O,o as Y,t as E,a as k,c as R,d as u,w as v,e as l,n as o,C as T,F as j,z as q,B as G,g as H,aa as K,v as P,x as Q,j as p}from"./index.6a902164.js";import{b as U}from"./utils.95e6bb58.js";const X={setup(){const e=H(),t=y([]),n=y(!1),a=y(!1),m=y(!1);let r=O({user:JSON.parse(localStorage.getItem("user")),page:0,limit:10,totle:"",getToday1:U(),myList:[]}),c=(i,g)=>{i=new Date(i.replace(/-/g,"/")),g=new Date(g.replace(/-/g,"/"));var h=Math.abs(i.getTime()-g.getTime())/1e3/24/60/60,w=Math.floor(h/365);return w},f=i=>{e.push({path:"/nearDetail",query:{username:i}})};const L=()=>{console.log("\u52A0\u8F7D+1"),r.page+=1,s()},_=()=>{a.value=!1,n.value=!0,s()};let s=async()=>{let{page:i,limit:g}=r;m.value&&(m.value=!1);let h=await K({page:i,limit:g});t.value=[];let w=t.value,b=h.reult.filter(d=>d.username!==r.user.username);r.myList=h.reult.filter(d=>d.username==r.user.username);let S=w.concat(b);S.forEach((d,oe)=>{var B=AMap.GeometryUtil.distance([r.myList[0].lng,r.myList[0].lat],[d.lng,d.lat]);let M=Number(B)/1e3;d.distance=M.toFixed(2)}),t.value=S,n.value=!1,(h.reult.length==0||h.reult.length<r.limit)&&(a.value=!0),console.log(t,"\u6240\u6709\u4EBA\u5458")};return Y(()=>{}),N(C({list:t,onLoad:L,loading:n,finished:a,onRefresh:_,refreshing:m},E(r)),{goDetail:f,getYear:c,getToday1:U})}},Z=e=>(P("data-v-535df339"),e=e(),Q(),e),$={class:"near"},x={class:"right"},ee={style:{"font-weight":"200","font-size":"0.3rem"}},te=Z(()=>l("span",null,"0.00km",-1)),se=["onClick"],ae={class:"right"},ne={style:{"font-weight":"200","font-size":"0.3rem"}};function le(e,t,n,a,m,r){const c=p("van-image"),f=p("van-cell"),L=p("van-list"),_=p("van-pull-refresh");return k(),R("div",$,[u(_,{modelValue:a.refreshing,"onUpdate:modelValue":t[2]||(t[2]=s=>a.refreshing=s),onRefresh:a.onRefresh},{default:v(()=>[u(L,{loading:a.loading,"onUpdate:loading":t[1]||(t[1]=s=>a.loading=s),finished:a.finished,"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:a.onLoad},{default:v(()=>[u(f,{center:""},{title:v(()=>[l("div",{onClick:t[0]||(t[0]=T(s=>a.goDetail(e.myList[0]?e.myList[0].username:""),["stop"])),class:"main"},[u(c,{width:"100",height:"100",src:e.myList[0]?JSON.parse(e.myList[0].user).headImg:""},null,8,["src"]),l("div",x,[l("h6",null,o(e.myList[0]?e.myList[0].username:""),1),l("h6",ee,o(e.myList[0]?e.myList[0].birthday?a.getYear(e.myList[0].birthday,a.getToday1()):"\u6682\u65E0":"")+" \xA0"+o(e.myList[0]?e.myList[0].heightWeight?e.myList[0].heightWeight:"\u6682\u65E0":"")+"\xA0 "+o(e.myList[0]?e.myList[0].attr?e.myList[0].attr:"\u6682\u65E0":""),1),l("p",null,o(e.myList[0]?e.myList[0].sign?e.myList[0].sign:"\u6682\u65E0\u7B7E\u540D":""),1),te])])]),_:1}),(k(!0),R(j,null,q(a.list,(s,i)=>(k(),G(f,{center:"",key:i},{title:v(()=>[l("div",{onClick:T(g=>a.goDetail(s.username),["stop"]),class:"main"},[u(c,{width:"100",height:"100",src:JSON.parse(s.user).headImg},null,8,["src"]),l("div",ae,[l("h6",null,o(s.username),1),l("h6",ne,o(s.birthday?a.getYear(s.birthday,a.getToday1()):"\u6682\u65E0")+" \xA0"+o(s.heightWeight?s.heightWeight:"\u6682\u65E0")+"\xA0 "+o(s.attr?s.attr:"\u6682\u65E0"),1),l("p",null,o(s.sign?s.sign:"\u6682\u65E0\u7B7E\u540D"),1),l("span",null,o(s.distance)+"km",1)])],8,se)]),_:2},1024))),128))]),_:1},8,["loading","finished","onLoad"])]),_:1},8,["modelValue","onRefresh"])])}var ge=J(X,[["render",le],["__scopeId","data-v-535df339"]]);export{ge as default};
