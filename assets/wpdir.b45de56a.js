var E=Object.defineProperty,R=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var S=(a,l,e)=>l in a?E(a,l,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[l]=e,L=(a,l)=>{for(var e in l||(l={}))J.call(l,e)&&S(a,e,l[e]);if(I)for(var e of I(l))j.call(l,e)&&S(a,e,l[e]);return a},P=(a,l)=>R(a,U(l));import{_ as T,r as q,s as z,j as B,t as A,c as p,a as o,w as u,b as n,F as y,k as b,p as G,d as H,M as O,I as K,e as _,f as s,g as w,i as f,l as F,m as M,n as Q}from"./index.7e280280.js";import{d as W,a as X,b as Y,n as Z,r as $}from"./dot.05d06585.js";import{u as x}from"./index.1c12ac1b.js";const ee={setup(){let a=G();const l=H();let e=q({list:[{title:"\u65B0\u5EFA\u6587\u4EF6\u5939",head:"\u65B0\u5EFA"},{title:"\u4E0A\u4F20\u56FE\u7247",head:"\u4E0A\u4F20"}],list1:[{title:"\u5220\u9664",head:"\u5220\u9664"}],parentDir:"",lastDir:"",parentFullDir:"",show:!1,show1:!1,moreShow:!1,dirName:"",dirList:[],fileList1:[],image:W,dotImg:X,user:JSON.parse(localStorage.getItem("user")),fullDir:"public/wp/"+JSON.parse(localStorage.getItem("user")).username+"_code",uploadPath:"",server:z,removeDir:""});B(()=>{});let i=r=>{const{parentFullDir:d}=e;e.moreShow=!0,e.removeDir=d+"/"+r},V=r=>{r.length||(r=[r]);var d=new FormData;d.enctype="multipart/form-data",d.append("mypath","public/wp/"+e.user.username+"_code/"+e.uploadPath),r.forEach(function(t){d.append("myfile",t.file)}),x(d).then(t=>{let m=e.fileList1;t.fileList.forEach(D=>{m.push({url:e.serverUrl+D.filename})}),e.fileList1=m,e.show=!1,c()})},N=()=>{e.show=!0},g=async r=>{r=="\u65B0\u5EFA\u6587\u4EF6\u5939"&&(e.show1=!0),r=="\u5220\u9664"&&(await Y({dirpath:"public/wp/"+e.user.username+"_code/"+e.removeDir}),O.success("\u5220\u9664\u6210\u529F"),e.moreShow=!1,c())},k=()=>{e.show1=!1,e.dirName=""},h=async()=>{let r=await Z({dir:e.parentFullDir+"/"+e.dirName,username:e.user.username});r.code==1&&(O.success(r.msg),e.show=!1,e.show1=!1,e.dirName="",c())},c=async(r="public/wp/"+e.user.username+"_code/"+e.parentFullDir)=>{let t=await $({dir:r});e.dirList=t.result},v=r=>{r.split(".")[1]?K([e.server+"/wp/"+ +JSON.parse(localStorage.getItem("user")).username+"_code/"+e.uploadPath+"/"+r]):a.params.dir?(e.parentFullDir=e.parentFullDir+"/"+r,e.lastDir=e.parentFullDir,e.parentDir=r,e.uploadPath=e.lastDir,c()):l.push({name:r,params:{dir:r}})},C=()=>{if(e.parentFullDir.indexOf("/")!=-1){e.parentFullDir=e.parentFullDir.replace("/"+e.parentDir,""),e.lastDir=e.parentFullDir;let r=e.lastDir.split("/");e.parentDir=r[r.length-1],c(),e.uploadPath=e.lastDir}else l.go(-1)};return B(()=>{e.parentFullDir=a.params.dir,e.parentDir=a.params.dir,e.uploadPath=e.parentDir,c()}),P(L({},A(e)),{pickEdit:N,pickOprate:g,cancleCreateDir:k,enterCreateDir:h,goDirIn:v,onClickLeft:C,afterRead:V,goMore:i})}},te={class:"popBox"},ae=["onClick"],re={key:0},le={key:1},oe={style:{width:"200px",height:"200px",background:"#fff",position:"relative",overflow:"hidden"}},se={style:{width:"100%",display:"flex","justify-content":"space-around",position:"absolute",bottom:"0.4rem"}},ie=w("\u53D6\u6D88"),ne=w("\u786E\u8BA4"),de={class:"popBox"},pe=["onClick"],ue={key:0},ce={class:"dirBox"},me=["onClick"],_e=["onClick"],fe=["src"];function he(a,l,e,i,V,N){const g=_("van-nav-bar"),k=_("t-fab"),h=_("t-avatar"),c=_("van-uploader"),v=_("t-popup"),C=_("t-input"),r=_("t-button"),d=_("t-image");return s(),p("div",null,[o(g,{title:a.parentFullDir,"left-text":"\u8FD4\u56DE","left-arrow":"",onClickLeft:i.onClickLeft},null,8,["title","onClickLeft"]),o(k,{onClick:i.pickEdit,class:"demo-fab-button editBtn"},null,8,["onClick"]),o(v,{modelValue:a.show,"onUpdate:modelValue":l[0]||(l[0]=t=>a.show=t),placement:"bottom"},{default:u(()=>[n("div",te,[(s(!0),p(y,null,b(a.list,(t,m)=>(s(),p("div",{onClick:D=>i.pickOprate(t.title),key:m,class:"item"},[t.title=="\u4E0A\u4F20\u56FE\u7247"?(s(),p("div",re,[o(c,{multiple:"","after-read":i.afterRead},{default:u(()=>[o(h,{shape:"circle"},{default:u(()=>[w(f(t.head),1)]),_:2},1024),n("p",null,f(t.title),1)]),_:2},1032,["after-read"])])):F("",!0),t.title!="\u4E0A\u4F20\u56FE\u7247"?(s(),p("div",le,[o(h,{shape:"circle"},{default:u(()=>[w(f(t.head),1)]),_:2},1024),n("p",null,f(t.title),1)])):F("",!0)],8,ae))),128))])]),_:1},8,["modelValue"]),o(v,{modelValue:a.show1,"onUpdate:modelValue":l[2]||(l[2]=t=>a.show1=t),placement:"center"},{default:u(()=>[n("div",oe,[o(C,{modelValue:a.dirName,"onUpdate:modelValue":l[1]||(l[1]=t=>a.dirName=t),style:{"margin-top":"0.4rem"},placeholder:"\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"]),n("div",se,[o(r,{onClick:i.cancleCreateDir},{default:u(()=>[ie]),_:1},8,["onClick"]),o(r,{onClick:i.enterCreateDir,theme:"primary"},{default:u(()=>[ne]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),o(v,{modelValue:a.moreShow,"onUpdate:modelValue":l[3]||(l[3]=t=>a.moreShow=t),placement:"bottom"},{default:u(()=>[n("div",de,[(s(!0),p(y,null,b(a.list1,(t,m)=>(s(),p("div",{onClick:D=>i.pickOprate(t.title),key:m,class:"item"},[t.title!="\u4E0A\u4F20\u56FE\u7247"?(s(),p("div",ue,[o(h,{shape:"circle"},{default:u(()=>[w(f(t.head),1)]),_:2},1024),n("p",null,f(t.title),1)])):F("",!0)],8,pe))),128))])]),_:1},8,["modelValue"]),n("ul",ce,[(s(!0),p(y,null,b(a.dirList,(t,m)=>(s(),p("li",{onClick:D=>i.goDirIn(t),key:m+"_dir"},[t.split(".")[1]?(s(),M(d,{key:0,class:"image-container",src:a.server+"/wp/"+a.user.username+"_code/"+a.uploadPath+"/"+t,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])):(s(),M(d,{key:1,class:"image-container",src:a.image,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])),n("p",null,f(t),1),n("div",{onClick:Q(D=>i.goMore(t),["stop"]),class:"more"},[n("img",{src:a.dotImg,alt:""},null,8,fe)],8,_e)],8,me))),128))])])}var ke=T(ee,[["render",he],["__scopeId","data-v-44790f88"]]);export{ke as default};
