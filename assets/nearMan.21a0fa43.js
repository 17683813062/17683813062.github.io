var b=Object.defineProperty;var g=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var m=(t,e,o)=>e in t?b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,u=(t,e)=>{for(var o in e||(e={}))h.call(e,o)&&m(t,o,e[o]);if(g)for(var o of g(e))j.call(e,o)&&m(t,o,e[o]);return t};import{_ as w,r as A,l as O,A as v,o as y,t as L,c as S,u as k,f as x,p as I,n as P,b as B}from"./index.482e71cd.js";import{s as C,j as N}from"./index.6572ccf4.js";const $={beforeRouteEnter(t,e,o){o(a=>{a.store.commit("changeFooter",!1)})},setup(){const t=k();let e=A({store:t,localObj:{},user:JSON.parse(localStorage.getItem("user"))}),o=null,a=null;O(()=>{v(()=>{r()})});const r=()=>{o=new AMap.Map("mapContainer",{zoom:12,pitch:45,viewMode:"3D"}),a=new AMap.Marker({position:new AMap.LngLat(116.401337,39.907886),title:"\u5317\u4EAC",offset:new AMap.Pixel(-8,-3)});let l=["<h6 style='font-size:0.34rem;padding:0;margin:0;line-height:0.8rem;margin-top:0.5rem'>\u672A\u53D1\u8D27\u5371\u5E9F\u95F4</h6>","<p style='padding:0;margin:0;'>222</p>","<button>\u5BFC\u822A</button>"],s=new AMap.InfoWindow({content:l.join("")});c(),f(),s.open(o,[116.401337,39.907886]),a.on("click",()=>{s.open(o,[116.401337,39.907886])}),o.add(a)},c=()=>{AMap.plugin("AMap.Geolocation",function(){var l=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,offset:[10,20],zoomToAccuracy:!0,position:"RB"});l.getCurrentPosition(function(n,i){n=="complete"?s(i):_(i)});function s(n){e.localObj.lng=n.position.lng,e.localObj.lat=n.position.lat,e.localObj.address=n.formattedAddress,alert(JSON.stringify(e.localObj));let i={lng:n.position.lng,lat:n.position.lat,address:n.formattedAddress,user:e.user};C(i).then(d=>{alert(JSON.stringify(d)+";"+JSON.stringify(i)),console.log(d,"\u4FDD\u5B58\u7528\u6237\u4FE1\u606F")}),a=new AMap.Marker({position:new AMap.LngLat(e.localObj.lng,e.localObj.lat),title:"\u6211\u7684",offset:new AMap.Pixel(-8,-3)});let M=[`<h6 style='font-size:0.3rem;padding:0;margin:0;line-height:0.5rem;margin-top:0.8rem'>${e.localObj.address}</h6>`,"<p style='padding:0;margin:0;'>\u60A8\u5F53\u524D\u4F4D\u7F6E</p>"],p=new AMap.InfoWindow({content:M.join("")});a.on("click",()=>{p.open(o,[e.localObj.lng,e.localObj.lat])}),p.open(o,[e.localObj.lng,e.localObj.lat]),o.add(a),o.setCenter(new AMap.LngLat(e.localObj.lng,e.localObj.lat))}function _(n){alert("\u5B9A\u4F4D\u51FA\u9519"),console.log(n,"\u5B9A\u4F4D\u51FA\u9519")}})},f=async()=>{let l=await N({user:e.user});console.log(l,"\u4EBA\u5458\u5B9A\u4F4D\u4FE1\u606F")};return y((l,s)=>{t.commit("changeFooter",!0)}),u({},L(e))}},z=t=>(I("data-v-2a50e872"),t=t(),P(),t),J={class:"main"},R=z(()=>B("div",{class:"map",id:"mapContainer"},null,-1)),W=[R];function E(t,e,o,a,r,c){return x(),S("div",J,W)}var D=w($,[["render",E],["__scopeId","data-v-2a50e872"]]);export{D as default};
