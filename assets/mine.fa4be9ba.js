var N=Object.defineProperty,O=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var M=(e,t,o)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,j=(e,t)=>{for(var o in t||(t={}))B.call(t,o)&&M(e,o,t[o]);if(S)for(var o of S(t))z.call(t,o)&&M(e,o,t[o]);return e},w=(e,t)=>O(e,$(t));import{_ as F,m as D,d as J,r as R,o as V,t as E,a as G,c as T,f as a,w as r,g as s,n as v,F as q,p as H,s as W,q as I,M as d,i as L,v as K,x as Q,j as l}from"./index.7ae61b15.js";const U=D({setup(){const e=J();let t=R({user:JSON.parse(localStorage.getItem("user")),address:"",obj:{address:"",attr:"",birthday:"",heightWeight:"",lat:"",lng:"",nickname:"",sign:"",user:"",username:""},flag:!0}),o=()=>{e.push({path:"/orderlist"})},y=()=>{e.push({path:"/shopcar"})},k=()=>{t.flag?(t.flag=!1,AMap.plugin("AMap.Geolocation",function(){var n=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});n.getCurrentPosition(),AMap.event.addListener(n,"complete",m),AMap.event.addListener(n,"error",A);function m(c){let h=c.position.lng,_=c.position.lat;localStorage.setItem("lng",h),localStorage.setItem("lat",_),H({lng:h,lat:_}).then(f=>{t.address=f.address,console.log(f,"\u5B9A\u4F4D\u4FE1\u606F"),W({user:t.user,address:f.address,lng:h,lat:_}).then(P=>{I(),console.log(P,"\u66F4\u65B0\u4F4D\u7F6E\u6210\u529F"),d.success("\u66F4\u65B0\u4F4D\u7F6E\u6210\u529F"),t.flag=!0,location.reload()})})}function A(c){console.log(JSON.stringify(c,"error")),d.error("\u66F4\u65B0\u5931\u8D25\uFF01\u63A8\u8350\u6362\u4E00\u4E2A\u6D4F\u89C8\u5668\u8BD5\u8BD5"),t.flag=!0}})):d.error("\u4E0D\u8981\u8FDE\u7EED\u70B9\u51FB\uFF01\uFF01\uFF01")},C=async()=>{let n=await I({username:t.user.username});if(n.reult.length==0){d.error("\u8BF7\u66F4\u65B0\u5B9A\u4F4D\u4FE1\u606F");return}t.obj=n.reult[0],console.log(n,"\u7528\u6237\u5B9A\u4F4D\u4FE1\u606F")};V(()=>{C()});let i=()=>{!t.user||!t.user.username||e.push({path:"/nearMan"})},p=()=>{e.push({path:"/leaveword"})},u=()=>{e.push({path:"/login"})},g=()=>{e.push({path:"/share"})};return w(j({},E(t)),{onLogin:u,goSpeakPage:p,goMapPage:i,goshare:g,getLocationFunc:k,goMyOrder:o,goShopCart:y})}}),b=e=>(K("data-v-7044a532"),e=e(),Q(),e),X=L("\u767B\u5F55"),Y=b(()=>s("br",null,null,-1)),Z={class:"nicknameBox"},x={style:{height:"0.6rem",display:"flex","align-items":"center"}},ee=L("\u66F4\u65B0\u4F4D\u7F6E "),te={style:{width:"100%",padding:"0.1rem 0.2rem","box-sizing":"border-box"}},oe=b(()=>s("span",null,"\u7559\u8A00",-1)),ne=b(()=>s("span",null,"\u63A8\u5E7F",-1));function ae(e,t,o,y,k,C){const i=l("t-button"),p=l("van-image"),u=l("van-grid-item"),g=l("van-grid"),n=l("t-cell");return G(),T(q,null,[a(i,{style:{float:"right",margin:"0.2rem 0.3rem"},onClick:t[0]||(t[0]=m=>e.onLogin()),theme:"primary",size:"small"},{default:r(()=>[X]),_:1}),Y,a(p,{style:{"margin-left":"0.2rem"},round:"",width:"2rem",height:"2rem",src:e.obj.user?JSON.parse(e.obj.user).headImg:e.user?e.user.headImg:""},null,8,["src"]),s("span",Z,v(e.obj?e.obj.nickname:""),1),s("p",null,"\xA0\xA0\xA0\xA0"+v(e.user?e.user.username?"\u767B\u5F55\u6210\u529F\uFF01\uFF01\uFF01 \u6B22\u8FCE\u767B\u5F55\uFF1A "+e.user.username:"\u7528\u6237\u540D\u4E0D\u5B58\u5728":" \u672A\u767B\u5F55"),1),s("div",x,[a(i,{style:{float:"left","margin-left":"0.3rem"},onClick:t[1]||(t[1]=m=>e.getLocationFunc()),theme:"primary",size:"small"},{default:r(()=>[ee]),_:1})]),s("p",te,v(e.obj.address?e.obj.address:""),1),a(g,null,{default:r(()=>[a(u,{onClick:e.goMyOrder,icon:"friends",text:"\u6211\u7684\u8BA2\u5355"},null,8,["onClick"]),a(u,{onClick:e.goShopCart,icon:"cart",text:"\u8D2D\u7269\u8F66"},null,8,["onClick"])]),_:1}),s("div",null,[a(n,{onClick:e.goSpeakPage,note:"\u6709\u95EE\u9898\u53EF\u4EE5\u5728\u8FD9\u7559\u8A00"},{title:r(()=>[oe]),_:1},8,["onClick"]),a(n,{onClick:e.goshare},{title:r(()=>[ne]),_:1},8,["onClick"])])],64)}var le=F(U,[["render",ae],["__scopeId","data-v-7044a532"]]);export{le as default};
