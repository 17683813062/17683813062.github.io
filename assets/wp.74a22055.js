var P=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var E=(t,e,s)=>e in t?P(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,O=(t,e)=>{for(var s in e||(e={}))H.call(e,s)&&E(t,s,e[s]);if(M)for(var s of M(e))T.call(e,s)&&E(t,s,e[s]);return t},R=(t,e)=>q(t,G(e));import{_ as W,D as F,d as z,r as A,o as K,M as D,B as Q,t as X,a as n,c as m,f as l,w as r,g as u,F as C,C as N,i as g,n as _,q as B,p as J,E as Y,G as Z,I as $,H as x,j as i}from"./index.f6f1b4cd.js";import{d as ee,a as te,n as oe,r as ae,b as le,i as se}from"./dot.45011e0d.js";const re={components:{[F.Component.name]:F.Component},setup(){let t=z(),e=A({show:!1,show1:!1,moreShow:!1,user:JSON.parse(localStorage.getItem("user")),list:[{title:"\u65B0\u5EFA\u6587\u4EF6\u5939",head:"\u65B0\u5EFA"},{title:"\u4E0A\u4F20\u56FE\u7247",head:"\u4E0A\u4F20"}],list1:[{title:"\u5220\u9664",head:"\u5220\u9664"}],dirName:"",image:ee,dotImg:te,dirList:[],fileList1:[],server:"",showViewer:!1,images:[],removeDir:"",flag:!localStorage.getItem("user")}),s=()=>{t.push({path:"/mine"})},d=a=>{e.moreShow=!0,e.removeDir=a},L=a=>{a.length||(a=[a]);var p=new FormData;p.enctype="multipart/form-data",p.append("mypath","public/wp/"+e.user.username+"_code"),a.forEach(function(c){p.append("myfile",c.file)}),Z(p).then(c=>{let v=e.fileList1;c.fileList.forEach(V=>{v.push({url:e.serverUrl+V.filename})}),e.fileList1=v,e.show=!1,f()})},U=a=>{a.split(".")[1]?$([e.server+a]):t.push({name:"wpdir",params:{dir:a,fullDir:""}})},I=()=>{e.show1=!1,e.dirName=""},h=async()=>{let a=await oe({dir:e.dirName,username:e.user.username});a.code==1&&(D.success(a.msg),e.show=!1,e.show1=!1,e.dirName="",f())},f=async(a="public/wp/"+e.user.username+"_code")=>{let c=await ae({dir:a});e.dirList=c.result},w=async a=>{a=="\u65B0\u5EFA\u6587\u4EF6\u5939"&&(e.show1=!0),a=="\u5220\u9664"&&(await le({dirpath:"public/wp/"+e.user.username+"_code/"+e.removeDir}),e.moreShow=!1,f())},S=()=>{if(localStorage.getItem("user")=="undefined"||localStorage.getItem("user")=="null"||localStorage.getItem("user")==""||localStorage.getItem("user")=="{}"||!localStorage.getItem("user")){localStorage.setItem("user","{}"),D.error("\u8BF7\u767B\u5F55!!!");return}e.show=!0},y=async()=>{let a=await x({username:e.user.username});localStorage.setItem("user",JSON.stringify(a.result[0])),a.result[0].wp||await se({username:e.user.username})};return K(()=>{if(localStorage.getItem("user")=="undefined"||localStorage.getItem("user")=="null"||localStorage.getItem("user")==""||localStorage.getItem("user")=="{}"||!localStorage.getItem("user")){localStorage.setItem("user","{}"),D.error("\u8BF7\u767B\u5F55!!!");return}localStorage.getItem("user")&&(e.server=Q+"/wp/"+JSON.parse(localStorage.getItem("user")).username+"_code/",y(),f())}),R(O({},X(e)),{pickEdit:S,pickOprate:w,cancleCreateDir:I,enterCreateDir:h,goDirIn:U,afterRead:L,goMore:d,goLogin:s})}},ne={class:"popBox"},ie=["onClick"],de={key:0},ue={key:1},me={style:{width:"200px",height:"200px",background:"#fff",position:"relative",overflow:"hidden"}},pe={style:{width:"100%",display:"flex","justify-content":"space-around",position:"absolute",bottom:"0.4rem"}},ce=g("\u53D6\u6D88"),_e=g("\u786E\u8BA4"),ge={class:"popBox"},fe=["onClick"],he={key:0},we=g("\u89C6\u9891\u6587\u4EF6\u8BF7\u4E0D\u8981\u7528\u4E2D\u6587\u6587\u4EF6\u5939\u5B58\u653E\u3002"),ve=g("\u4E0A\u4F20\u89C6\u9891\u7684\u9009\u9879\u8BF7\u4E0D\u8981\u7528\u6765\u4F20\u56FE\u7247"),ke={class:"dirBox"},ye=["onClick"],Ce=["onClick"],Ie=["src"];function Se(t,e,s,d,L,U){const I=i("t-fab"),h=i("t-avatar"),f=i("van-uploader"),w=i("t-popup"),S=i("t-input"),y=i("t-button"),a=i("van-swipe-item"),p=i("van-swipe"),c=i("van-notice-bar"),v=i("t-image"),V=i("t-image-viewer"),j=i("van-dialog");return n(),m(C,null,[l(I,{onClick:d.pickEdit,class:"demo-fab-button editBtn"},null,8,["onClick"]),l(w,{modelValue:t.show,"onUpdate:modelValue":e[0]||(e[0]=o=>t.show=o),placement:"bottom"},{default:r(()=>[u("div",ne,[(n(!0),m(C,null,N(t.list,(o,k)=>(n(),m("div",{onClick:b=>d.pickOprate(o.title),key:k,class:"item"},[o.title=="\u4E0A\u4F20\u56FE\u7247"?(n(),m("div",de,[l(f,{multiple:"","after-read":d.afterRead},{default:r(()=>[l(h,{shape:"circle"},{default:r(()=>[g(_(o.head),1)]),_:2},1024),u("p",null,_(o.title),1)]),_:2},1032,["after-read"])])):B("",!0),o.title!="\u4E0A\u4F20\u56FE\u7247"?(n(),m("div",ue,[l(h,{shape:"circle"},{default:r(()=>[g(_(o.head),1)]),_:2},1024),u("p",null,_(o.title),1)])):B("",!0)],8,ie))),128))])]),_:1},8,["modelValue"]),l(w,{modelValue:t.show1,"onUpdate:modelValue":e[2]||(e[2]=o=>t.show1=o),placement:"center"},{default:r(()=>[u("div",me,[l(S,{modelValue:t.dirName,"onUpdate:modelValue":e[1]||(e[1]=o=>t.dirName=o),style:{"margin-top":"0.4rem"},placeholder:"\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"]),u("div",pe,[l(y,{onClick:d.cancleCreateDir},{default:r(()=>[ce]),_:1},8,["onClick"]),l(y,{onClick:d.enterCreateDir,theme:"primary"},{default:r(()=>[_e]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),l(w,{modelValue:t.moreShow,"onUpdate:modelValue":e[3]||(e[3]=o=>t.moreShow=o),placement:"bottom"},{default:r(()=>[u("div",ge,[(n(!0),m(C,null,N(t.list1,(o,k)=>(n(),m("div",{onClick:b=>d.pickOprate(o.title),key:k,class:"item"},[o.title!="\u4E0A\u4F20\u56FE\u7247"?(n(),m("div",he,[l(h,{shape:"circle"},{default:r(()=>[g(_(o.head),1)]),_:2},1024),u("p",null,_(o.title),1)])):B("",!0)],8,fe))),128))])]),_:1},8,["modelValue"]),l(c,{"left-icon":"volume-o",scrollable:!1},{default:r(()=>[l(p,{vertical:"",class:"notice-swipe",autoplay:6e3,"show-indicators":!1},{default:r(()=>[l(a,null,{default:r(()=>[we]),_:1}),l(a,null,{default:r(()=>[ve]),_:1})]),_:1})]),_:1}),u("ul",ke,[(n(!0),m(C,null,N(t.dirList,(o,k)=>(n(),m("li",{onClick:b=>d.goDirIn(o),key:k+"_dir"},[o.split(".")[1]?(n(),J(v,{key:0,class:"image-container",src:t.server+o,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])):(n(),J(v,{key:1,class:"image-container",src:t.image,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])),u("p",null,_(o),1),u("div",{onClick:Y(b=>d.goMore(o),["stop"]),class:"more"},[u("img",{src:t.dotImg,alt:""},null,8,Ie)],8,Ce)],8,ye))),128))]),l(V,{modelValue:t.showViewer,"onUpdate:modelValue":e[4]||(e[4]=o=>t.showViewer=o),images:t.images,"onUpdate:images":e[5]||(e[5]=o=>t.images=o),"initial-index":0},null,8,["modelValue","images"]),l(j,{onConfirm:d.goLogin,title:"\u8BF7\u767B\u5F55\uFF01\uFF01\uFF01",show:t.flag,"onUpdate:show":e[6]||(e[6]=o=>t.flag=o)},null,8,["onConfirm","show"])],64)}var Ne=W(re,[["render",Se],["__scopeId","data-v-e053997e"]]);export{Ne as default};
