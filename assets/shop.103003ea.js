var R=Object.defineProperty,U=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var I=(e,s,o)=>s in e?R(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,b=(e,s)=>{for(var o in s||(s={}))M.call(s,o)&&I(e,o,s[o]);if(D)for(var o of D(s))j.call(s,o)&&I(e,o,s[o]);return e},z=(e,s)=>U(e,V(s));import{_ as E,m as J,b as O,d as q,U as P,r as W,V as X,e as Y,o as A,t as H,a as _,c as m,f as i,w as p,F as v,z as T,B as K,g as c,i as w,n as d,W as Q,X as $,Y as Z,M as ee,v as te,x as se,j as n}from"./index.bd460a8a.js";const oe=J({beforeRouteEnter(e,s,o){o(t=>{s.path=="/shopdetail"?(t.scroll=localStorage.getItem("scrollTop"),t.isType=localStorage.getItem("isType")):(t.scroll=0,t.isType="all",localStorage.removeItem("scrollTop"),localStorage.removeItem("isType")),console.log(s,"from"),t.store.commit("changeFooter",!1)})},setup(){const e=O(),s=q();let o=P(null),t=W({store:e,imgUrl:X,goodsList:[],typeList:[],flutureList:[],scroll:null,isType:"all",timer:""}),k=()=>{t.timer=setTimeout(()=>{o._value.scrollTop=0,clearTimeout(t.timer)},100)},L=async()=>{let l=await Q();t.typeList=l.result.filter(r=>r.name!="\u5373\u5C06\u4E0A\u65B0")},h=l=>{s.push({path:"/shopdetail",query:{_id:l}}),localStorage.setItem("scrollTop",o.value.scrollTop)},y=async()=>{if(t.isType=="all"){let l=await $();t.goodsList=l.result}else u(t.isType)},u=async l=>{if(l=="all"){let r=await $();t.goodsList=r.result}else{let r=await Z({type:l});r.code==1&&ee.success("\u7B5B\u9009\u6210\u529F"),console.log(l,r.result),l=="\u5373\u5C06\u4E0A\u65B0"?t.flutureList=r.result:(t.goodsList=r.result,console.log(t.goodsList,"\u7B5B\u9009"))}},f=l=>{t.isType=l,u(l)};return Y((l,r)=>{l.path=="/shopdetail"&&localStorage.setItem("isType",t.isType),e.commit("changeFooter",!0)}),A(()=>{y(),L(),u("\u5373\u5C06\u4E0A\u65B0"),t.timer=setTimeout(()=>{o._value.scrollTop=t.scroll,clearTimeout(t.timer)},100)}),z(b({},H(t)),{listDom:o,goDetail:h,filterData:f,returnTop:k})}}),N=e=>(te("data-v-2e5afcb0"),e=e(),se(),e),le={ref:"listDom",id:"shoplist1",class:"shopList"},ae=w(" \u5546\u57CE "),ie=N(()=>c("p",{style:{"font-size":"0.3rem","font-weight":"bold","text-indent":"0.2rem","line-height":"1rem"}},"\u5373\u5C06\u4E0A\u65B0",-1)),re={class:"list"},ne=["onClick"],ce={class:"price"},pe=N(()=>c("p",{style:{"font-size":"0.3rem","font-weight":"bold","text-indent":"0.2rem","line-height":"1rem"}},"\u5168\u90E8\u5546\u54C1",-1)),de={class:"list list1"},_e=["onClick"],ue={class:"price"};function me(e,s,o,t,k,L){const h=n("t-navbar"),y=n("van-sticky"),u=n("t-image"),f=n("t-swiper-item"),l=n("t-swiper"),r=n("t-grid-item"),B=n("t-grid"),F=n("t-tag"),S=n("van-image"),G=n("t-divider"),x=n("van-tag");return _(),m("div",le,[i(y,{"offset-top":0},{default:p(()=>[i(h,{onClickText:e.returnTop},{default:p(()=>[ae]),_:1},8,["onClickText"])]),_:1}),i(l,{class:"my-swiper",autoplay:!1,height:200,direction:"horizontal",navigation:{type:"fraction"}},{default:p(()=>[i(f,{class:"swiper-item--demo"},{default:p(()=>[i(u,{width:"100%",height:"4rem",fit:"cover",lazy:"",class:"image-container",src:"http://101.35.30.21:4399/newImg/dm.jpg",alt:"\u4E00\u5F20\u56FE\u7247"})]),_:1}),i(f,{class:"swiper-item--demo"},{default:p(()=>[i(u,{width:"100%",height:"4rem",fit:"cover",lazy:"",class:"image-container",src:"http://101.35.30.21:4399/newImg/mdzs.png",alt:"\u4E00\u5F20\u56FE\u7247"})]),_:1})]),_:1}),i(B,null,{default:p(()=>[i(r,{onClick:s[0]||(s[0]=a=>e.filterData("all")),text:"\u5168\u90E8",image:e.imgUrl},null,8,["image"]),(_(!0),m(v,null,T(e.typeList,(a,g)=>(_(),K(r,{onClick:C=>e.filterData(a.name),key:g,text:a.name,image:e.imgUrl},null,8,["onClick","text","image"]))),128))]),_:1}),ie,c("ul",re,[(_(!0),m(v,null,T(e.flutureList,(a,g)=>(_(),m("li",{onClick:C=>e.goDetail(a._id),key:g},[i(F,{size:"small",class:"tag",theme:"primary",variant:"light-outline"},{default:p(()=>[w(d(a.typeName),1)]),_:2},1024),i(S,{width:"86%",height:"3rem",fit:"cover",src:JSON.parse(a.bannerList)[0].url},null,8,["src"]),c("p",ce,"\uFFE5"+d(a.price),1),c("p",null,d(a.title),1),c("p",null,d(a.desc),1)],8,ne))),128))]),i(G),pe,c("ul",de,[(_(!0),m(v,null,T(e.goodsList,(a,g)=>(_(),m("li",{onClick:C=>e.goDetail(a._id),key:g},[i(x,{class:"tag",plain:"",type:"primary"},{default:p(()=>[w(d(a.typeName),1)]),_:2},1024),i(S,{width:"86%",height:"3rem",fit:"cover",src:JSON.parse(a.bannerList)[0].url},null,8,["src"]),c("p",ue,"\uFFE5"+d(a.price),1),c("p",null,d(a.title),1),c("p",null,d(a.desc),1)],8,_e))),128))])],512)}var he=E(oe,[["render",me],["__scopeId","data-v-2e5afcb0"]]);export{he as default};
