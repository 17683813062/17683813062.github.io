var M=Object.defineProperty,j=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var L=(a,r,e)=>r in a?M(a,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[r]=e,B=(a,r)=>{for(var e in r||(r={}))T.call(r,e)&&L(a,e,r[e]);if(I)for(var e of I(r))U.call(r,e)&&L(a,e,r[e]);return a},O=(a,r)=>j(a,J(r));import{_ as q,B as z,r as G,s as A,o as E,t as H,a as s,c as p,d as i,w as c,e as m,F,p as P,i as w,n as f,q as g,C as K,v as S,E as Q,x as W,u as X,g as Y,y as Z,G as $,M as R,I as x,j as h}from"./index.9cc7f150.js";import{d as ee,a as te,b as ae,n as le,r as re}from"./dot.02516c83.js";import{g as oe}from"./utils.25dbed4f.js";const se={components:{vue3videoPlay:z},setup(){let a=X();const r=Y();let e=G({list:[{title:"\u65B0\u5EFA\u6587\u4EF6\u5939",head:"\u6587\u4EF6\u5939"},{title:"\u4E0A\u4F20\u56FE\u7247",head:"\u56FE\u7247"},{title:"\u4E0A\u4F20\u89C6\u9891",head:"\u89C6\u9891"}],list1:[{title:"\u5220\u9664",head:"\u5220\u9664"}],parentDir:"",lastDir:"",parentFullDir:"",show:!1,show1:!1,moreShow:!1,dirName:"",dirList:[],fileList1:[],image:ee,dotImg:te,user:JSON.parse(localStorage.getItem("user")),fullDir:"public/wp/"+JSON.parse(localStorage.getItem("user")).username+"_code",uploadPath:"",server:A,options:{width:"100%",height:"3.5rem",color:"#409eff",muted:!1,webFullScreen:!1,speedRate:["0.75","1.0","1.25","1.5","2.0"],autoPlay:!1,loop:!1,mirror:!1,ligthOff:!1,volume:.3,control:TextTrackCue,title:"",poster:""},removeDir:""});E(()=>{});let n=l=>{const{parentFullDir:o}=e;e.moreShow=!0,e.removeDir=o+"/"+l},V=l=>{l.length||(l=[l]);var o=new FormData;o.enctype="multipart/form-data",o.append("mypath","public/wp/"+e.user.username+"_code/"+e.uploadPath),l.forEach(function(t){o.append("myfile",t.file)}),Z(o).then(t=>{let u=e.fileList1;t.fileList.forEach(_=>{u.push({url:e.server+_.filename})}),e.fileList1=u,e.show=!1,d()})},N=l=>{l.length||(l=[l]);var o=new FormData;o.enctype="multipart/form-data",o.append("user",JSON.stringify(e.user)),o.append("timestamp",oe()),o.append("mypath","public/wp/"+e.user.username+"_code/"+e.uploadPath),o.append("mypath1","/wp/"+e.user.username+"_code/"+e.uploadPath),l.forEach(function(t){o.append("myfile",t.file)}),$(o).then(t=>{let u=e.fileList1;t.fileList.forEach(_=>{u.push({url:e.server+_.filename})}),e.fileList1=u,e.show=!1,d()})},k=()=>{e.show=!0},C=async l=>{l=="\u65B0\u5EFA\u6587\u4EF6\u5939"&&(e.show1=!0),l=="\u5220\u9664"&&(await ae({dirpath:"public/wp/"+e.user.username+"_code/"+e.removeDir}),R.success("\u5220\u9664\u6210\u529F"),e.moreShow=!1,d())},v=()=>{e.show1=!1,e.dirName=""},D=async()=>{let l=await le({dir:e.parentFullDir+"/"+e.dirName,username:e.user.username});l.code==1&&(R.success(l.msg),e.show=!1,e.show1=!1,e.dirName="",d())},d=async(l="public/wp/"+e.user.username+"_code/"+e.parentFullDir)=>{let t=await re({dir:l});e.dirList=t.result},b=l=>{l.split(".")[1]?x([e.server+"/wp/"+ +JSON.parse(localStorage.getItem("user")).username+"_code/"+e.uploadPath+"/"+l]):a.params.dir?(e.parentFullDir=e.parentFullDir+"/"+l,e.lastDir=e.parentFullDir,e.parentDir=l,e.uploadPath=e.lastDir,d()):r.push({name:l,params:{dir:l}})},y=()=>{if(e.parentFullDir.indexOf("/")!=-1){e.parentFullDir=e.parentFullDir.replace("/"+e.parentDir,""),e.lastDir=e.parentFullDir;let l=e.lastDir.split("/");e.parentDir=l[l.length-1],d(),e.uploadPath=e.lastDir}else r.go(-1)};return E(()=>{e.parentFullDir=a.params.dir,e.parentDir=a.params.dir,e.uploadPath=e.parentDir,d()}),O(B({},H(e)),{pickEdit:k,pickOprate:C,cancleCreateDir:v,enterCreateDir:D,goDirIn:b,onClickLeft:y,afterRead:V,afterRead1:N,goMore:n})}},ie={class:"popBox"},ne=["onClick"],pe={key:0},de={key:1},ue={key:2},ce={style:{width:"200px",height:"200px",background:"#fff",position:"relative",overflow:"hidden"}},me={style:{width:"100%",display:"flex","justify-content":"space-around",position:"absolute",bottom:"0.4rem"}},fe=w("\u53D6\u6D88"),he=w("\u786E\u8BA4"),_e={class:"popBox"},ve=["onClick"],ge={key:0},we={class:"dirBox"},De=["onClick"],ye=["onClick"],ke=["src"];function Ce(a,r,e,n,V,N){const k=h("van-nav-bar"),C=h("t-fab"),v=h("t-avatar"),D=h("van-uploader"),d=h("t-popup"),b=h("t-input"),y=h("t-button"),l=h("t-image"),o=h("vue3videoPlay");return s(),p("div",null,[i(k,{title:a.parentFullDir,"left-text":"\u8FD4\u56DE","left-arrow":"",onClickLeft:n.onClickLeft},null,8,["title","onClickLeft"]),i(C,{onClick:n.pickEdit,class:"demo-fab-button editBtn"},null,8,["onClick"]),i(d,{modelValue:a.show,"onUpdate:modelValue":r[0]||(r[0]=t=>a.show=t),placement:"bottom"},{default:c(()=>[m("div",ie,[(s(!0),p(F,null,P(a.list,(t,u)=>(s(),p("div",{onClick:_=>n.pickOprate(t.title),key:u,class:"item"},[t.title=="\u4E0A\u4F20\u56FE\u7247"?(s(),p("div",pe,[i(D,{accept:".png,.jpg",multiple:"","after-read":n.afterRead},{default:c(()=>[i(v,{shape:"circle"},{default:c(()=>[w(f(t.head),1)]),_:2},1024),m("p",null,f(t.title),1)]),_:2},1032,["after-read"])])):g("",!0),t.title=="\u4E0A\u4F20\u89C6\u9891"?(s(),p("div",de,[i(D,{accept:".mp4,.m3u8",multiple:"","after-read":n.afterRead1},{default:c(()=>[i(v,{shape:"circle"},{default:c(()=>[w(f(t.head),1)]),_:2},1024),m("p",null,f(t.title),1)]),_:2},1032,["after-read"])])):g("",!0),t.title!="\u4E0A\u4F20\u56FE\u7247"&&t.title!="\u4E0A\u4F20\u89C6\u9891"?(s(),p("div",ue,[i(v,{shape:"circle"},{default:c(()=>[w(f(t.head),1)]),_:2},1024),m("p",null,f(t.title),1)])):g("",!0)],8,ne))),128))])]),_:1},8,["modelValue"]),i(d,{modelValue:a.show1,"onUpdate:modelValue":r[2]||(r[2]=t=>a.show1=t),placement:"center"},{default:c(()=>[m("div",ce,[i(b,{modelValue:a.dirName,"onUpdate:modelValue":r[1]||(r[1]=t=>a.dirName=t),style:{"margin-top":"0.4rem"},placeholder:"\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"]),m("div",me,[i(y,{onClick:n.cancleCreateDir},{default:c(()=>[fe]),_:1},8,["onClick"]),i(y,{onClick:n.enterCreateDir,theme:"primary"},{default:c(()=>[he]),_:1},8,["onClick"])])])]),_:1},8,["modelValue"]),i(d,{modelValue:a.moreShow,"onUpdate:modelValue":r[3]||(r[3]=t=>a.moreShow=t),placement:"bottom"},{default:c(()=>[m("div",_e,[(s(!0),p(F,null,P(a.list1,(t,u)=>(s(),p("div",{onClick:_=>n.pickOprate(t.title),key:u,class:"item"},[t.title!="\u4E0A\u4F20\u56FE\u7247"?(s(),p("div",ge,[i(v,{shape:"circle"},{default:c(()=>[w(f(t.head),1)]),_:2},1024),m("p",null,f(t.title),1)])):g("",!0)],8,ve))),128))])]),_:1},8,["modelValue"]),m("ul",we,[(s(!0),p(F,null,P(a.dirList,(t,u)=>(s(),p("li",{style:K(t.split(".")[1]=="mp4"?"width:100%":"calc(100% / 3 - 0.2rem)"),onClick:_=>n.goDirIn(t),key:u+"_dir"},[t.split(".")[1]=="jpg"||t.split(".")[1]=="png"?(s(),S(l,{key:0,fit:"cover",class:"image-container",src:a.server+"/wp/"+a.user.username+"_code/"+a.uploadPath+"/"+t,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])):g("",!0),t.split(".")[1]=="mp4"||t.split(".")[1]=="m3u8"?(s(),S(o,Q({key:1,src:a.server+"/wp/"+a.user.username+"_code/"+a.uploadPath+"/"+t,style:{width:"100%",height:"3.5rem"}},a.options),null,16,["src"])):(s(),S(l,{key:2,class:"image-container",src:a.image,alt:"\u4E00\u5F20\u56FE\u7247"},null,8,["src"])),m("p",null,f(t),1),t.split(".")[1]?g("",!0):(s(),p("div",{key:3,onClick:W(_=>n.goMore(t),["stop"]),class:"more"},[m("img",{src:a.dotImg,alt:""},null,8,ke)],8,ye))],12,De))),128))])])}var Ve=q(se,[["render",Ce],["__scopeId","data-v-73600472"]]);export{Ve as default};
