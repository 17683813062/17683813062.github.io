var A=Object.defineProperty,P=Object.defineProperties;var N=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var S=(e,t,o)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,C=(e,t)=>{for(var o in t||(t={}))$.call(t,o)&&S(e,o,t[o]);if(k)for(var o of k(t))B.call(t,o)&&S(e,o,t[o]);return e},M=(e,t)=>P(e,N(t));import{_ as z,m as F,d as O,r as D,o as J,t as R,a as V,c as E,f as n,w as i,g as s,n as h,F as G,p as T,s as q,q as j,M as u,i as w,v as H,x as W,j as _}from"./index.62d1ce96.js";const K=F({setup(){const e=O();let t=D({user:JSON.parse(localStorage.getItem("user")),address:"",obj:{address:"",attr:"",birthday:"",heightWeight:"",lat:"",lng:"",nickname:"",sign:"",user:"",username:""},flag:!0}),o=()=>{t.flag?(t.flag=!1,AMap.plugin("AMap.Geolocation",function(){var a=new AMap.Geolocation({enableHighAccuracy:!0,timeout:1e4,buttonOffset:new AMap.Pixel(10,20),zoomToAccuracy:!0,buttonPosition:"RB"});a.getCurrentPosition(),AMap.event.addListener(a,"complete",d),AMap.event.addListener(a,"error",I);function d(l){let g=l.position.lng,p=l.position.lat;localStorage.setItem("lng",g),localStorage.setItem("lat",p),T({lng:g,lat:p}).then(m=>{t.address=m.address,console.log(m,"\u5B9A\u4F4D\u4FE1\u606F"),q({user:t.user,address:m.address,lng:g,lat:p}).then(L=>{j(),console.log(L,"\u66F4\u65B0\u4F4D\u7F6E\u6210\u529F"),u.success("\u66F4\u65B0\u4F4D\u7F6E\u6210\u529F"),t.flag=!0,location.reload()})})}function I(l){console.log(JSON.stringify(l,"error")),u.error("\u66F4\u65B0\u5931\u8D25\uFF01\u63A8\u8350\u6362\u4E00\u4E2A\u6D4F\u89C8\u5668\u8BD5\u8BD5"),t.flag=!0}})):u.error("\u4E0D\u8981\u8FDE\u7EED\u70B9\u51FB\uFF01\uFF01\uFF01")},v=async()=>{let a=await j({username:t.user.username});if(a.reult.length==0){u.error("\u8BF7\u66F4\u65B0\u5B9A\u4F4D\u4FE1\u606F");return}t.obj=a.reult[0],console.log(a,"\u7528\u6237\u5B9A\u4F4D\u4FE1\u606F")};J(()=>{v()});let b=()=>{!t.user||!t.user.username||e.push({path:"/nearMan"})},y=()=>{e.push({path:"/leaveword"})},r=()=>{e.push({path:"/login"})},c=()=>{e.push({path:"/share"})};return M(C({},R(t)),{onLogin:r,goSpeakPage:y,goMapPage:b,goshare:c,getLocationFunc:o})}}),f=e=>(H("data-v-335555a0"),e=e(),W(),e),Q=w("\u767B\u5F55"),U=f(()=>s("br",null,null,-1)),X={class:"nicknameBox"},Y={style:{height:"0.6rem",display:"flex","align-items":"center"}},Z=w("\u66F4\u65B0\u4F4D\u7F6E "),x={style:{width:"100%",padding:"0.1rem 0.2rem","box-sizing":"border-box"}},ee=f(()=>s("span",null,"\u7559\u8A00",-1)),te=f(()=>s("span",null,"\u63A8\u5E7F",-1));function oe(e,t,o,v,b,y){const r=_("t-button"),c=_("van-image"),a=_("t-cell");return V(),E(G,null,[n(r,{style:{float:"right",margin:"0.2rem 0.3rem"},onClick:t[0]||(t[0]=d=>e.onLogin()),theme:"primary",size:"small"},{default:i(()=>[Q]),_:1}),U,n(c,{style:{"margin-left":"0.2rem"},round:"",width:"2rem",height:"2rem",src:e.obj.user?JSON.parse(e.obj.user).headImg:e.user?e.user.headImg:""},null,8,["src"]),s("span",X,h(e.obj?e.obj.nickname:""),1),s("p",null,"\xA0\xA0\xA0\xA0"+h(e.user?e.user.username?"\u767B\u5F55\u6210\u529F\uFF01\uFF01\uFF01 \u6B22\u8FCE\u767B\u5F55\uFF1A "+e.user.username:"\u7528\u6237\u540D\u4E0D\u5B58\u5728":" \u672A\u767B\u5F55"),1),s("div",Y,[n(r,{style:{float:"left","margin-left":"0.3rem"},onClick:t[1]||(t[1]=d=>e.getLocationFunc()),theme:"primary",size:"small"},{default:i(()=>[Z]),_:1})]),s("p",x,h(e.obj.address?e.obj.address:""),1),s("div",null,[n(a,{onClick:e.goSpeakPage,note:"\u6709\u95EE\u9898\u53EF\u4EE5\u5728\u8FD9\u7559\u8A00"},{title:i(()=>[ee]),_:1},8,["onClick"]),n(a,{onClick:e.goshare},{title:i(()=>[te]),_:1},8,["onClick"])])],64)}var ne=z(K,[["render",oe],["__scopeId","data-v-335555a0"]]);export{ne as default};
